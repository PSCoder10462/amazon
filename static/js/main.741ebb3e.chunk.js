(this.webpackJsonpamazon=this.webpackJsonpamazon||[]).push([[0],{101:function(e,t,c){},102:function(e,t,c){},104:function(e,t,c){},105:function(e,t,c){},107:function(e,t,c){"use strict";c.r(t);var n=c(3),a=c.n(n),s=c(24),r=c.n(s),i=(c(65),c(9)),o=(c(66),c.p+"static/media/amazon.1c9be0b2.png"),l=(c(67),c(55)),d=c.n(l),j=c(56),u=c.n(j),b=c(11),h=c(17),m=c(2),O=Object(n.createContext)(),p=function(e){var t=e.reducer,c=e.initialState,a=e.children;return Object(m.jsx)(O.Provider,{value:Object(n.useReducer)(t,c),children:a})},x=function(){return Object(n.useContext)(O)},_=c(44);_.a.initializeApp({apiKey:"AIzaSyBBrUa-j-7gREBLYeR9__LTupiaq-B4csM",authDomain:"clone-d34a6.firebaseapp.com",projectId:"clone-d34a6",storageBucket:"clone-d34a6.appspot.com",messagingSenderId:"1009520188191",appId:"1:1009520188191:web:55c2fc252106a8f875ee2a",measurementId:"G-2SQY2RCSL3"});var g=_.a;var f=function(){var e=x(),t=Object(i.a)(e,2),c=t[0],n=c.basket,a=c.user,s=(t[1],Object(b.f)());return Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)(h.b,{to:"/",children:Object(m.jsx)("img",{src:o,alt:"amazon_logo",className:"header__logo"})}),Object(m.jsxs)("div",{className:"header__search",children:[Object(m.jsx)("input",{type:"text",className:"header__searchInput"}),Object(m.jsx)(d.a,{className:"header__searchIcon"})]}),Object(m.jsxs)("div",{className:"header__nav",children:[Object(m.jsxs)("div",{className:"header__option ptr",onClick:function(){a?window.confirm("You will be signed out! \nStill want to continue?")&&g.auth().signOut().then((function(){console.log("signed out")})).catch((function(e){return console.log(e.message)})):s.push("/login")},children:[Object(m.jsxs)("span",{className:"header__optionLineOne",children:["Hello ",a?"".concat(a.email):"Guest"]}),Object(m.jsx)("span",{className:"header__optionLineTwo",children:a?"Sign Out":"Sign In"})]}),Object(m.jsx)(h.b,{to:"/orders",children:Object(m.jsxs)("div",{className:"header__option",children:[Object(m.jsx)("span",{className:"header__optionLineOne",children:"Returns"}),Object(m.jsx)("span",{className:"header__optionLineTwo",children:"& Orders"})]})}),Object(m.jsxs)("div",{className:"header__option",children:[Object(m.jsx)("span",{className:"header__optionLineOne",children:"Your"}),Object(m.jsx)("span",{className:"header__optionLineTwo",children:"Prime"})]}),Object(m.jsx)(h.b,{to:"/checkout",children:Object(m.jsxs)("div",{className:"header__optionBasket",children:[Object(m.jsx)(u.a,{}),Object(m.jsx)("span",{className:"header__optionLineTwo header__basketCount",children:null===n||void 0===n?void 0:n.length})]})})]})]})},v=c.p+"static/media/banner.6f0b4c6a.jpg",N=(c(77),c(78),c(36)),y=c.n(N),k=c(37),C=c.n(k),S="ADD_TO_BASKET",w="REMOVE_FROM_BASKET",A="SET_USER",B="EMPTY_BASKET";var I=function(e){var t=e.id,c=e.title,n=e.img_url,a=e.price,s=e.rating,r=x(),o=Object(i.a)(r,2),l=(o[0],o[1]);return Object(m.jsxs)("div",{className:"product",children:[Object(m.jsxs)("div",{className:"product__info",children:[Object(m.jsx)("p",{children:c}),Object(m.jsxs)("p",{className:"product__price",children:[Object(m.jsx)("small",{children:"\u20b9 "}),Object(m.jsx)("strong",{children:a})]}),Object(m.jsxs)("div",{className:"product__rating",children:[Array(s).fill().map((function(e,t){return Object(m.jsx)(y.a,{},t)})),Array(5-s).fill().map((function(e,t){return Object(m.jsx)(C.a,{},t)}))]})]}),Object(m.jsx)("img",{src:n,alt:"product"}),Object(m.jsx)("button",{className:"ptr",onClick:function(){l({type:S,item:{id:t,title:c,img_url:n,price:a,rating:s}})},children:"Add to Cart"})]})};var P=function(){return Object(m.jsx)("div",{className:"home",children:Object(m.jsxs)("div",{className:"home__container",children:[Object(m.jsx)("img",{src:v,alt:"home banner",className:"home__image"}),Object(m.jsxs)("div",{className:"home__row",children:[Object(m.jsx)(I,{id:"hpatps103",title:"Harry Potter and the Philosopher's Stone",img_url:"https://m.media-amazon.com/images/I/81YOuOGFCJL._AC_UY327_FMwebp_QL65_.jpg",price:"291",rating:5}),Object(m.jsx)(I,{id:"hpatcof104",title:"Harry Potter and the Chamber of Secrets (Harry Potter 2)",img_url:"https://m.media-amazon.com/images/I/91HHqVTAJQL._AC_UY327_FMwebp_QL65_.jpg",price:"326",rating:5})]}),Object(m.jsxs)("div",{className:"home__row",children:[Object(m.jsx)(I,{id:"nai11128b",title:"New Apple iPhone 11 (128GB) - Black",img_url:"https://m.media-amazon.com/images/I/71i2XhHU3pL._AC_UY327_FMwebp_QL65_.jpg",price:"59,900",rating:4}),Object(m.jsx)(I,{id:"nai1264b",title:"New Apple iPhone 12 Mini (64GB) - Black",img_url:"https://m.media-amazon.com/images/I/71uuDYxn3XL._AC_UY327_FMwebp_QL65_.jpg",price:"58,999",rating:5}),Object(m.jsx)(I,{id:"op95wm12r256g",title:"OnePlus 9 5G (Winter Mist, 12GB RAM, 256GB Storage) | Extra INR 3,000 OFF on Exchange",img_url:"https://m.media-amazon.com/images/I/61MJilnI5pL._AC_UY327_FMwebp_QL65_.jpg",price:"54,999",rating:5})]}),Object(m.jsx)("div",{className:"home__row",children:Object(m.jsx)(I,{id:"pfgnbrhbs26i",title:"Punam Flutes G Natural Base Right Hand Bansuri Size 26 Inches",img_url:"https://images-na.ssl-images-amazon.com/images/I/71YlTHBvCqL._SL1500_.jpg",price:"4,526",rating:5})})]})})},L=(c(79),c.p+"static/media/amazon_black.88aafd26.png");var E=function(){var e=Object(b.f)(),t=Object(n.useState)(""),c=Object(i.a)(t,2),a=c[0],s=c[1],r=Object(n.useState)(""),o=Object(i.a)(r,2),l=o[0],d=o[1];return Object(m.jsxs)("div",{className:"login",children:[Object(m.jsx)(h.b,{to:"/",children:Object(m.jsx)("img",{src:L,className:"login__logo",alt:"amazon"})}),Object(m.jsxs)("div",{className:"login__container",children:[Object(m.jsx)("h1",{children:"Sign-In"}),Object(m.jsxs)("form",{children:[Object(m.jsx)("h5",{children:"E-mail"}),Object(m.jsx)("input",{type:"email",value:a,onChange:function(e){return s(e.target.value)},autoComplete:"username",required:!0}),Object(m.jsx)("h5",{children:"Password"}),Object(m.jsx)("input",{type:"password",value:l,onChange:function(e){return d(e.target.value)},autoComplete:"current-password",required:!0}),Object(m.jsx)("button",{className:"login__signInButton",type:"submit",onClick:function(t){t.preventDefault(),g.auth().signInWithEmailAndPassword(a,l).then((function(){e.push("/")})).catch((function(e){var t=e.message;console.log(t)}))},children:"Sign In"})]}),Object(m.jsx)("p",{children:"By signing-in you agree to Amazon's FAKE CLONE Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads"}),Object(m.jsx)("button",{className:"login__registerButton",onClick:function(t){t.preventDefault(),g.auth().createUserWithEmailAndPassword(a,l).then((function(){e.push("/")})).catch((function(e){var t=e.message;console.log(t)}))},children:"Create your Amazon account"})]})]})},T=c(29),M=c.n(T),z=c(43),Y=(c(81),c(82),Object(n.forwardRef)((function(e,t){var c=e.id,n=e.title,a=e.img_url,s=e.price,r=e.rating,o=e.inOrder,l=x(),d=Object(i.a)(l,2),j=(d[0],d[1]);return Object(m.jsxs)("div",{className:"checkoutProduct",ref:t,children:[Object(m.jsx)("img",{src:a,alt:"product",className:"checkoutProduct__img"}),Object(m.jsxs)("div",{className:"checkoutProduct__info",children:[Object(m.jsx)("p",{className:"checkoutProduct__title",children:n}),Object(m.jsxs)("p",{className:"checkoutProduct__price",children:[Object(m.jsx)("small",{children:"\u20b9"}),Object(m.jsx)("strong",{children:s})]}),Object(m.jsxs)("div",{className:"checkoutProduct__rating",children:[Array(r).fill().map((function(e,t){return Object(m.jsx)(y.a,{},t)})),Array(5-r).fill().map((function(e,t){return Object(m.jsx)(C.a,{},t)}))]}),o&&Object(m.jsx)("button",{onClick:function(){j({type:w,id:c})},className:"ptr",children:"Remove from Cart"})]})]})}))),F=c(27),R=c(25),G=c(26),D=c.n(G),H=c(45),U=c(21),Q=function(e){var t=0;return null===e||void 0===e||e.forEach((function(e){for(var c="",n=0;n<e.price.length;++n)","!==e.price[n]&&(c+=e.price[n]);t+=Number(c)})),t},K=function(e,t){switch(t.type){case S:return Object(U.a)(Object(U.a)({},e),{},{basket:[].concat(Object(H.a)(e.basket),[t.item])});case w:var c=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(H.a)(e.basket);return c>=0?n.splice(c,1):console.warn("Can't remove product {id: ".concat(t.id,"} as it does not exist in your cart")),Object(U.a)(Object(U.a)({},e),{},{basket:n});case B:return Object(U.a)(Object(U.a)({},e),{},{basket:[]});case A:return Object(U.a)(Object(U.a)({},e),{},{user:t.user});default:return Object(U.a)({},e)}},q=c(57),J=c.n(q).a.create({baseURL:"https://ps-amazon-backend.herokuapp.com/"}),W=g.firestore();var X=function(){var e=x(),t=Object(i.a)(e,2),c=t[0],a=c.basket,s=c.user,r=t[1],o=Object(b.f)(),l=Object(R.useStripe)(),d=Object(R.useElements)(),j=Object(n.useState)(null),u=Object(i.a)(j,2),O=u[0],p=u[1],_=Object(n.useState)(!1),g=Object(i.a)(_,2),f=g[0],v=g[1],N=Object(n.useState)(null),y=Object(i.a)(N,2),k=y[0],C=y[1],S=Object(n.useState)(!1),w=Object(i.a)(S,2),A=w[0],I=w[1],P=Object(n.useState)(!0),L=Object(i.a)(P,2),E=L[0],T=L[1];Object(n.useEffect)((function(){(function(){var e=Object(z.a)(M.a.mark((function e(){var t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J({method:"post",url:"payments/create?total=".concat(100*Q(a))});case 2:t=e.sent,C(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[a]),console.log(k);var G=function(){var e=Object(z.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0===Q(a)){e.next=9;break}return I(!0),e.next=6,l.confirmCardPayment(k,{payment_method:{card:d.getElement(R.CardElement)}}).then((function(e){var t=e.paymentIntent;v(!0),p(null),I(!1),W.collection("users").doc(null===s||void 0===s?void 0:s.uid).collection("orders").doc(t.id).set({basket:a,amount:t.amount,created:t.created}),r({type:B}),o.replace("/orders")}));case 6:e.sent,e.next=10;break;case 9:alert("Not enough items in the cart!");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"payment",children:Object(m.jsxs)("div",{className:"payment__container",children:[Object(m.jsxs)("h1",{children:["Checkout ",Object(m.jsxs)(h.b,{to:"/checkout",children:["(",null===a||void 0===a?void 0:a.length," items)"]})]}),Object(m.jsxs)("div",{className:"payment__section",children:[Object(m.jsx)("div",{className:"payment__title",children:Object(m.jsx)("h3",{children:"Delivery Address"})}),Object(m.jsxs)("div",{className:"payment__address",children:[Object(m.jsx)("p",{children:null===s||void 0===s?void 0:s.email}),Object(m.jsx)("p",{children:"React-221B"}),Object(m.jsx)("p",{children:"Firebase-Baker's Street"})]})]}),Object(m.jsxs)("div",{className:"payment__section",children:[Object(m.jsx)("div",{className:"payment__title",children:Object(m.jsx)("h3",{children:"Review Items and Delivery"})}),Object(m.jsx)("div",{className:"payment__items",children:Object(m.jsx)(F.a,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(m.jsx)(Y,{id:e.id,title:e.title,img_url:e.img_url,price:e.price,rating:e.rating,inOrder:!0},e.id)}))})})]}),Object(m.jsxs)("div",{className:"payment__section",children:[Object(m.jsx)("div",{className:"payment__title",children:Object(m.jsx)("h3",{children:"Payment Method"})}),Object(m.jsx)("div",{className:"payment__details",children:Object(m.jsxs)("form",{onSubmit:G,children:[Object(m.jsx)(R.CardElement,{onChange:function(e){T(e.empty),p(e.error?e.error.message:null)}}),Object(m.jsx)("div",{className:"payment__priceContainer",children:Object(m.jsx)(D.a,{renderText:function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("h3",{children:["Order Total: ",e]}),Object(m.jsx)("p",{children:Object(m.jsx)("small",{children:'Enter "4242424242..." for fake card in all fields'})})]})},value:Q(a),thousandSeparator:!0,decimalScale:2,displayType:"text",prefix:"\u20b9"})}),Object(m.jsx)("button",{disabled:E||A||f,children:Object(m.jsx)("span",{children:A?Object(m.jsx)("p",{children:" processing "}):Object(m.jsx)("p",{children:" Buy Now! "})})}),O&&Object(m.jsx)("div",{children:O})]})})]})]})})},V=(c(101),c(102),c(58)),Z=c.n(V);var $=function(e){var t=e.data,c=e.orderId,n=t.amount,a=t.basket,s=t.created;return Object(m.jsxs)("div",{className:"order",children:[Object(m.jsx)("h2",{children:"Order"}),Object(m.jsx)("p",{children:Z.a.unix(s).format("MMMM Do YYYY, h:mma")}),Object(m.jsxs)("p",{className:"order__id",children:[Object(m.jsx)("strong",{children:"Order Id: "}),Object(m.jsx)("small",{children:c})]}),Object(m.jsx)(F.a,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(m.jsx)(Y,{title:e.title,price:e.price,rating:e.rating,img_url:e.img_url,id:e.id,inOrder:!1},e.id)}))}),Object(m.jsx)(D.a,{renderText:function(e){return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("h3",{className:"order__total",children:["Order Total: ",e]})})},value:n/100,thousandSeparator:!0,decimalScale:2,displayType:"text",prefix:"\u20b9"})]})},ee=g.firestore();var te=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],a=t[1],s=x(),r=Object(i.a)(s,2),o=r[0],l=(o.basket,o.user);return r[1],Object(n.useEffect)((function(){l?ee.collection("users").doc(null===l||void 0===l?void 0:l.uid).collection("orders").orderBy("created","desc").onSnapshot((function(e){a(e.docs.map((function(e){return{id:e.id,data:e.data()}})))})):a([])}),[l]),Object(m.jsxs)("div",{className:"orders",children:[Object(m.jsxs)("h1",{children:["Your orders: ",null===c||void 0===c?void 0:c.length]}),Object(m.jsx)("div",{className:"orders__order",children:c===[]?Object(m.jsx)("p",{children:"You don't have any orders yet!"}):null===c||void 0===c?void 0:c.map((function(e){return Object(m.jsx)($,{data:e.data,orderId:e.id},e.id)}))})]})};c(104),c(105);var ce=function(){var e=x(),t=Object(i.a)(e,2),c=t[0],n=c.basket,a=c.user,s=(t[1],Object(b.f)());return Object(m.jsxs)("div",{className:"subtotal",children:[Object(m.jsx)(D.a,{renderText:function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items): ",Object(m.jsx)("strong",{children:e})]}),Object(m.jsxs)("small",{className:"subtotal__gift",children:[Object(m.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},value:Q(n),thousandSeparator:!0,decimalScale:2,displayType:"text",prefix:"\u20b9"}),Object(m.jsx)("button",{className:"ptr",onClick:function(){a?s.push("/payment"):s.push("/login")},children:"Proceed to Checkout"})]})};var ne=function(){var e=x(),t=Object(i.a)(e,2),c=t[0],n=c.basket,a=c.user;return t[1],Object(m.jsxs)("div",{className:"checkout",children:[Object(m.jsxs)("div",{className:"checkout__left",children:[Object(m.jsx)("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:"checkout ad banner"}),Object(m.jsxs)("div",{children:[Object(m.jsxs)("h3",{className:"checkout__greet",children:["Hello, ",null===a||void 0===a?void 0:a.email]}),Object(m.jsx)("h2",{className:"checkout__title",children:"Your Shopping Cart"})]}),Object(m.jsx)(F.a,{children:null===n||void 0===n?void 0:n.map((function(e){return Object(m.jsx)(Y,{title:e.title,price:e.price,rating:e.rating,img_url:e.img_url,id:e.id,inOrder:!0},e.id)}))})]}),Object(m.jsx)("div",{className:"checkout__right",children:Object(m.jsx)(ce,{})})]})},ae=c(59),se=Object(ae.a)("pk_test_51IqCSGSCsARf75NHM0Lm2KGmB62miDXAsZlQdL6WiDAdkG0uO9PM3h9AGwHKCGT3yQvXDPVQGich5oRL0OGxNB1s0026T4RSoM");var re=function(){var e=x(),t=Object(i.a)(e,2),c=(t[0].user,t[1]);return Object(n.useEffect)((function(){g.auth().onAuthStateChanged((function(e){c(e?{type:A,user:e}:{type:A,user:null})}))}),[c]),Object(m.jsx)(h.a,{children:Object(m.jsx)("div",{className:"app",children:Object(m.jsxs)(b.c,{children:[Object(m.jsx)(b.a,{path:"/login",children:Object(m.jsx)(E,{})}),Object(m.jsxs)(b.a,{path:"/orders",children:[Object(m.jsx)(f,{}),Object(m.jsx)(te,{})]}),Object(m.jsxs)(b.a,{path:"/checkout",children:[Object(m.jsx)(f,{}),Object(m.jsx)(ne,{})]}),Object(m.jsxs)(b.a,{path:"/payment",children:[Object(m.jsx)(f,{}),Object(m.jsx)(R.Elements,{stripe:se,children:Object(m.jsx)(X,{})})]}),Object(m.jsxs)(b.a,{path:"/",children:[Object(m.jsx)(f,{}),Object(m.jsx)(P,{})]})]})})})},ie=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,119)).then((function(t){var c=t.getCLS,n=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),n(e),a(e),s(e),r(e)}))};r.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(p,{initialState:{basket:[],user:null},reducer:K,children:Object(m.jsx)(re,{})})}),document.getElementById("root")),ie()},65:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){},77:function(e,t,c){},78:function(e,t,c){},79:function(e,t,c){},81:function(e,t,c){},82:function(e,t,c){}},[[107,1,2]]]);
//# sourceMappingURL=main.741ebb3e.chunk.js.map